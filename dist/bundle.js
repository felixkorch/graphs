!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e),n.d(e,"xycharts",function(){return r});var i,r,o=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});!function(t){var e,n=function(){function t(){this.object={}}return t.prototype.put=function(t,e){this.object[t]=e},t.prototype.get=function(t){return this.object[t]},t}(),i=function(){return function(t){this.id=t||""}}(),r=function(){return function(){this.stroke="BLUE",this.strokeWidth=3}}(),s=function(){return function(){}}(),h=function(){function t(t){this.data=t||[],this.properties=new s,this.xKey="",this.yKey=""}return t.prototype.addData=function(t,e){this.data.splice(0,e),this.data.push(t)},t.prototype.bounds=function(){if(!this.data)return{min:0,max:0};var t=this.data.map(function(t){return t.value});return{min:Math.min.apply(Math,t),max:Math.max.apply(Math,t)}},t.prototype.toHourMinute=function(){var t=this;return this.data.map(function(e){return new Date(e[t.xKey]).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})},t}();t.DataSet=h,function(t){t[t.MOVETO=0]="MOVETO",t[t.LINETO=1]="LINETO",t[t.LINEH=2]="LINEH",t[t.LINEV=3]="LINEV"}(e||(e={}));var a=function(t){function n(e,n){var i=t.call(this,e)||this;return i.pathProperties=n||new r,i.currentPos=[0,0],i.dataPoints=[],i}return o(n,t),n.typeString=function(t,n){switch(t){case e.MOVETO:return"M "+n[0]+" "+n[1]+" ";case e.LINETO:return"L "+n[0]+" "+n[1]+" ";case e.LINEH:return"H "+n[0]+" ";case e.LINEV:return"V "+n[1]+" "}},n.prototype.moveTo=function(t,n){return this.currentPos=[t,n],this.dataPoints.push({coords:[t,n],type:e.MOVETO}),this},n.prototype.lineTo=function(t,n){return this.currentPos=[t,n],this.dataPoints.push({coords:[t,n],type:e.LINETO}),this},n.prototype.LineH=function(t){return this.currentPos[0]=t,this.dataPoints.push({coords:[t,0],type:e.LINEH}),this},n.prototype.LineV=function(t){return this.currentPos[1]=t,this.dataPoints.push({coords:[0,t],type:e.LINEV}),this},n.prototype.update=function(){for(var t="",e=0,i=this.dataPoints;e<i.length;e++){var r=i[e];t+=n.typeString(r.type,r.coords)}this.path=t},n.prototype.render=function(t){this.update();var e=t.querySelector("#"+this.id);e?e.setAttribute("d",this.path):t.innerHTML+='<path id="'+this.id+'" d="'+this.path+'"stroke='+this.pathProperties.stroke+" stroke-width="+this.pathProperties.strokeWidth+" />"},n}(i),u=function(t){function e(e,n,i,r){var o=t.call(this,r)||this;return o.content=e,o.fontSize=n,o.position=i,o}return o(e,t),e.prototype.render=function(t){this.id?t.querySelector("#"+this.id).innerHTML=this.content:t.innerHTML+='<text id="'+this.id+'" font-size="'+this.fontSize+'"x="'+this.position.x+'" y="'+this.position.y+'" class="small">'+this.content+"</text>"},e}(i),c=function(t){function e(e){var n=t.call(this,e)||this;return n._components=[],n}return o(e,t),Object.defineProperty(e.prototype,"components",{set:function(t){this._components=t},enumerable:!0,configurable:!0}),e.prototype.render=function(t){t.querySelector("#"+this.id)||(t.innerHTML+='<g id="'+this.id+'"></g>');var e=t.querySelector("#"+this.id);e.innerHTML="",this._components.forEach(function(t){return t.render(e)})},e}(i),d=function(){function t(t){this.div=document.getElementById(t),this.offsetX=.04*this.div.offsetWidth,this.offsetY=.05*this.div.offsetHeight,this.dimensions={width:this.div.offsetWidth-this.offsetX,height:this.div.offsetHeight-this.offsetY},this.components=new n,this.div.innerHTML=this.renderSVG(),this.dataCollection=[]}return t.prototype.createDataSet=function(){var t=new h;return this.dataCollection.push(t),t},t.prototype.renderSVG=function(t){return'<svg id="SVG_DIV" width="100%" height="100%" viewBox=" 0 0 '+this.div.offsetWidth+" "+this.div.offsetHeight+'"><g id="main" transform="translate('+this.offsetX/2+" "+this.offsetY/2+')" ></g></svg>'},t.prototype.createReferenceLines=function(){var t=this.dataCollection[0];if(t){for(var e=t.properties.density,n={stroke:"#dbdbdb",strokeWidth:.5},i=n.strokeWidth/2,r=this.dimensions.width/(t.data.length+1),o=new a("refLines",n),s=0;s<t.data.length-1;s++)o.moveTo(r*(s+2)-i,i),o.LineV(this.dimensions.height-i);for(s=0;s<e-1;s++)o.moveTo(i+r,this.dimensions.height/e*(s+1)+i),o.LineH(this.dimensions.width-i);return this.components.put(o.id,o),o}},t.prototype.createXHeaders=function(){var t=this.dataCollection[0];if(t){for(var e=[],n=this.dimensions.height/46,i=this.dimensions.width/(t.data.length+1),r=t.toHourMinute(),o=0;o<t.data.length;o++)e.push(new u(r[o],n,{x:i*(o+1),y:this.dimensions.height}));return e}},t.prototype.createYHeaders=function(){var t=this.dataCollection[0];if(t){for(var e=[],n=this.dimensions.height/35,i=t.properties.density,r=this.dimensions.height/i,o=0;o<i;o++){var s=Math.floor(t.bounds().max-o*t.bounds().max/(i-1)).toString();e.push(new u(s,n,{x:0,y:r*o+.35*n}))}return e}},t.prototype.draw=function(){var t=this.div.querySelector("#main");this.createReferenceLines().render(t);for(var e=0,n=this.dataCollection;e<n.length;e++){var i=n[e];this.createGraph(i).render(t)}var r=new c("yHeaders");r.components=this.createYHeaders(),r.render(t);var o=new c("xHeaders");o.components=this.createXHeaders(),o.render(t)},t}();t.XYChart=d;var p=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.connectPoints=function(t,e,n){n.lineTo(t,e).moveTo(t,e)},e.prototype.createGraph=function(){var t=new a("graph");return t.moveTo(0,0),t.lineTo(100,100),t},e}(d);t.LineChart=p;var f=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.connectPoints=function(t,e,n,i){var r=e<n.currentPos[1],o=i.properties.pathProperties.strokeWidth/2;n.LineH(t).moveTo(t-o,r?n.currentPos[1]+o:n.currentPos[1]-o).LineV(r?e+o:e-o).moveTo(n.currentPos[0]-o,n.currentPos[1])},e.prototype.createGraph=function(t){var e=new a("graph",t.properties.pathProperties),n=this.dimensions.width/(t.data.length+1),i=this.dimensions.height/t.properties.density;e.moveTo(n,this.dimensions.height-t.data[0][t.yKey]/t.bounds().max*this.dimensions.height-i);for(var r=1;r<t.data.length;r++)this.connectPoints(n*(r+1),this.dimensions.height-i-t.data[r][t.yKey]/t.bounds().max*(this.dimensions.height-i),e,t);return e.LineH(this.dimensions.width),this.components.put(e.id,e),e},e}(d);t.StepLineChart=f}(r||(r={})),e.default=r}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwieHljaGFydHMiLCJQYXRoVHlwZSIsIk1hcCIsInRoaXMiLCJwdXQiLCJTVkdDb21wb25lbnQiLCJpZCIsIlBhdGhQcm9wZXJ0aWVzIiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJQcm9wZXJ0aWVzIiwiRGF0YVNldCIsImRhdGEiLCJwcm9wZXJ0aWVzIiwieEtleSIsInlLZXkiLCJhZGREYXRhIiwiaXRlbSIsInJlbW92ZSIsInNwbGljZSIsInB1c2giLCJib3VuZHMiLCJtaW4iLCJtYXgiLCJ2YWx1ZXMiLCJtYXAiLCJlIiwiTWF0aCIsImFwcGx5IiwidG9Ib3VyTWludXRlIiwiX3RoaXMiLCJEYXRlIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwiaG91ciIsIm1pbnV0ZSIsIlBhdGgiLCJfc3VwZXIiLCJwYXRoUHJvcGVydGllcyIsImN1cnJlbnRQb3MiLCJkYXRhUG9pbnRzIiwiX19leHRlbmRzIiwidHlwZVN0cmluZyIsInR5cGUiLCJjb29yZHMiLCJNT1ZFVE8iLCJMSU5FVE8iLCJMSU5FSCIsIkxJTkVWIiwibW92ZVRvIiwieCIsInkiLCJsaW5lVG8iLCJMaW5lSCIsIkxpbmVWIiwidXBkYXRlIiwicGF0aCIsIl9pIiwiX2EiLCJsZW5ndGgiLCJyZW5kZXIiLCJjb250YWluZXIiLCJlbGVtZW50IiwicXVlcnlTZWxlY3RvciIsInNldEF0dHJpYnV0ZSIsImlubmVySFRNTCIsIlRleHQiLCJjb250ZW50IiwiZm9udFNpemUiLCJwb3NpdGlvbiIsIlNWR0JhdGNoIiwiX2NvbXBvbmVudHMiLCJsaXN0IiwiZm9yRWFjaCIsIlhZQ2hhcnQiLCJkaXYiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwib2Zmc2V0WCIsIm9mZnNldFdpZHRoIiwib2Zmc2V0WSIsIm9mZnNldEhlaWdodCIsImRpbWVuc2lvbnMiLCJ3aWR0aCIsImhlaWdodCIsImNvbXBvbmVudHMiLCJyZW5kZXJTVkciLCJkYXRhQ29sbGVjdGlvbiIsImNyZWF0ZURhdGFTZXQiLCJzZXQiLCJjcmVhdGVSZWZlcmVuY2VMaW5lcyIsImRlbnNpdHkiLCJoYWxmU3Ryb2tlIiwiaW50ZXJ2YWwiLCJjcmVhdGVYSGVhZGVycyIsInJlc3VsdCIsImludGVydmFsWCIsImRhdGVzIiwiY3JlYXRlWUhlYWRlcnMiLCJmbG9vciIsInRvU3RyaW5nIiwiZHJhdyIsIm1haW5TdmciLCJjcmVhdGVHcmFwaCIsInlIZWFkZXJzIiwieEhlYWRlcnMiLCJMaW5lQ2hhcnQiLCJjb25uZWN0UG9pbnRzIiwiU3RlcExpbmVDaGFydCIsIm1vdmluZ1VwIiwiaW50ZXJ2YWxZIiwiX193ZWJwYWNrX2V4cG9ydHNfXyJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxR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Y0FBYUEsRUE1VTlCLENBQWlCM0csTUFBUSxLQThXTjhHLEVBQUEiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IG5hbWVzcGFjZSB4eWNoYXJ0cyB7XHJcbiAgICB0eXBlIENvbG9yID0gXCIjRkZGRkZGXCIgfCBcIiNGRjAwMDBcIiB8IFwiIzAwMDBGRlwiO1xyXG4gICAgY29uc3QgV0hJVEU6IENvbG9yID0gXCIjRkZGRkZGXCI7XHJcbiAgICBjb25zdCBSRUQ6IENvbG9yID0gXCIjRkYwMDAwXCI7XHJcbiAgICBjb25zdCBCTFVFOiBDb2xvciA9IFwiIzAwMDBGRlwiO1xyXG5cclxuICAgIGNsYXNzIE1hcDxLLCBWPiB7XHJcbiAgICAgICAga2V5OiBLO1xyXG4gICAgICAgIHZhbHVlOiBWO1xyXG4gICAgICAgIG9iamVjdDogYW55O1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAgICAgdGhpcy5vYmplY3QgPSB7fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1dChrZXk6IEssIHZhbHVlOiBWKSB7XHJcbiAgICAgICAgICAgIHRoaXMub2JqZWN0W2tleV0gPSB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGdldChrZXk6IEspOiBWIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub2JqZWN0W2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IFNWR19ESVYgPSAnbWFpbic7XHJcblxyXG4gICAgYWJzdHJhY3QgY2xhc3MgU1ZHQ29tcG9uZW50IHtcclxuICAgICAgICBhYnN0cmFjdCByZW5kZXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQ7XHJcbiAgICAgICAgaWQ6IHN0cmluZztcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IoaWQ/OiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5pZCA9IGlkID8gaWQgOiAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xhc3MgUGF0aFByb3BlcnRpZXMge1xyXG4gICAgICAgIHB1YmxpYyBzdHJva2U6IHN0cmluZyA9IFwiQkxVRVwiO1xyXG4gICAgICAgIHB1YmxpYyBzdHJva2VXaWR0aDogbnVtYmVyID0gMztcclxuICAgIH1cclxuICAgIFxyXG4gICAgY2xhc3MgUHJvcGVydGllcyB7XHJcbiAgICAgICAgcHVibGljIHBhdGhQcm9wZXJ0aWVzOiBQYXRoUHJvcGVydGllcztcclxuICAgICAgICBwdWJsaWMgZGVuc2l0eTogbnVtYmVyO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBEYXRhU2V0IHtcclxuICAgICAgICBwdWJsaWMgZGF0YTogYW55W107XHJcbiAgICAgICAgcHVibGljIHByb3BlcnRpZXM6IFByb3BlcnRpZXM7IFxyXG4gICAgICAgIHB1YmxpYyB4S2V5OiBzdHJpbmc7XHJcbiAgICAgICAgcHVibGljIHlLZXk6IHN0cmluZztcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IoZGF0YT86IGFueSkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBkYXRhID8gZGF0YSA6IFtdO1xyXG4gICAgICAgICAgICB0aGlzLnByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpO1xyXG4gICAgICAgICAgICB0aGlzLnhLZXkgPSAnJztcclxuICAgICAgICAgICAgdGhpcy55S2V5ID0gJyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWRkRGF0YShpdGVtOiBhbnksIHJlbW92ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YS5zcGxpY2UoMCwgcmVtb3ZlKTtcclxuICAgICAgICAgICAgdGhpcy5kYXRhLnB1c2goaXRlbSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm91bmRzKCkge1xyXG4gICAgICAgICAgICBpZighdGhpcy5kYXRhKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgbWluOiAwLCBtYXg6IDAgfTtcclxuICAgICAgICAgICAgbGV0IHZhbHVlcyA9IHRoaXMuZGF0YS5tYXAoZSA9PiBlLnZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHsgbWluOiBNYXRoLm1pbiguLi52YWx1ZXMpLCBtYXg6IE1hdGgubWF4KC4uLnZhbHVlcykgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB0b0hvdXJNaW51dGUoKSB7IC8vIEZpeCBvcHRpb25zXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEubWFwKGUgPT4gbmV3IERhdGUoZVt0aGlzLnhLZXldKS50b0xvY2FsZVRpbWVTdHJpbmcoW10sIHtob3VyOiAnMi1kaWdpdCcsIG1pbnV0ZTonMi1kaWdpdCd9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBlbnVtIFBhdGhUeXBlIHtcclxuICAgICAgICBNT1ZFVE8sXHJcbiAgICAgICAgTElORVRPLFxyXG4gICAgICAgIExJTkVILFxyXG4gICAgICAgIExJTkVWXHJcbiAgICB9XHJcblxyXG4gICAgY2xhc3MgUGF0aCBleHRlbmRzIFNWR0NvbXBvbmVudCB7XHJcblxyXG4gICAgICAgIHB1YmxpYyBwYXRoUHJvcGVydGllczogUGF0aFByb3BlcnRpZXM7XHJcbiAgICAgICAgcHJvdGVjdGVkIHBhdGg6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgY3VycmVudFBvczogWyBudW1iZXIsIG51bWJlciBdO1xyXG4gICAgICAgIHByb3RlY3RlZCBkYXRhUG9pbnRzOiB7IGNvb3JkczogW251bWJlciwgbnVtYmVyXSwgdHlwZTogUGF0aFR5cGUgfVtdO1xyXG4gICAgXHJcbiAgICAgICAgY29uc3RydWN0b3IoaWQ6IHN0cmluZywgcGF0aFByb3BlcnRpZXM/OiBQYXRoUHJvcGVydGllcykge1xyXG4gICAgICAgICAgICBzdXBlcihpZCk7XHJcbiAgICAgICAgICAgIHRoaXMucGF0aFByb3BlcnRpZXMgPSBwYXRoUHJvcGVydGllcyA/IHBhdGhQcm9wZXJ0aWVzIDogbmV3IFBhdGhQcm9wZXJ0aWVzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBvcyA9IFswLCAwXTtcclxuICAgICAgICAgICAgdGhpcy5kYXRhUG9pbnRzID0gW107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgc3RhdGljIHR5cGVTdHJpbmcodHlwZTogUGF0aFR5cGUsIGNvb3JkczogW251bWJlciwgbnVtYmVyXSkge1xyXG4gICAgICAgICAgICBzd2l0Y2godHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBQYXRoVHlwZS5NT1ZFVE86IHJldHVybiAnTSAnICsgY29vcmRzWzBdICsgJyAnICsgY29vcmRzWzFdICsgJyAnO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBQYXRoVHlwZS5MSU5FVE86IHJldHVybiAnTCAnICsgY29vcmRzWzBdICsgJyAnICsgY29vcmRzWzFdICsgJyAnO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBQYXRoVHlwZS5MSU5FSDogcmV0dXJuICdIICcgKyBjb29yZHNbMF0gKyAnICc7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFBhdGhUeXBlLkxJTkVWOiByZXR1cm4gJ1YgJyArIGNvb3Jkc1sxXSArICcgJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG1vdmVUbyh4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQb3MgPSBbeCwgeV07XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVBvaW50cy5wdXNoKHsgY29vcmRzOiBbeCwgeV0sIHR5cGU6IFBhdGhUeXBlLk1PVkVUTyB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgcHVibGljIGxpbmVUbyh4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQb3MgPSBbeCwgeV07XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVBvaW50cy5wdXNoKHsgY29vcmRzOiBbeCwgeV0sIHR5cGU6IFBhdGhUeXBlLkxJTkVUTyB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgcHVibGljIExpbmVIKHg6IG51bWJlcikge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQb3NbMF0gPSB4O1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFQb2ludHMucHVzaCh7IGNvb3JkczogW3gsIDBdLCB0eXBlOiBQYXRoVHlwZS5MSU5FSCB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgcHVibGljIExpbmVWKHk6IG51bWJlcikge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQb3NbMV0gPSB5O1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFQb2ludHMucHVzaCh7IGNvb3JkczogWzAsIHldLCB0eXBlOiBQYXRoVHlwZS5MSU5FViB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdXBkYXRlKCkge1xyXG4gICAgICAgICAgICBsZXQgcGF0aCA9ICcnO1xyXG4gICAgICAgICAgICBmb3IobGV0IHggb2YgdGhpcy5kYXRhUG9pbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBwYXRoICs9IFBhdGgudHlwZVN0cmluZyh4LnR5cGUsIHguY29vcmRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnBhdGggPSBwYXRoO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHB1YmxpYyByZW5kZXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgICAgICAgICBsZXQgZWxlbWVudCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjJyArIHRoaXMuaWQpO1xyXG4gICAgICAgICAgICBpZihlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnZCcsIHRoaXMucGF0aCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCArPVxyXG4gICAgICAgICAgICAgICAgJzxwYXRoIGlkPVwiJyArIHRoaXMuaWQgKyAnXCIgZD1cIicgKyB0aGlzLnBhdGggKyAnXCInICtcclxuICAgICAgICAgICAgICAgICdzdHJva2U9JysgdGhpcy5wYXRoUHJvcGVydGllcy5zdHJva2UgKyAnIHN0cm9rZS13aWR0aD0nICsgdGhpcy5wYXRoUHJvcGVydGllcy5zdHJva2VXaWR0aCArICcgLz4nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgY2xhc3MgVGV4dCBleHRlbmRzIFNWR0NvbXBvbmVudCB7XHJcbiAgICAgICAgY29udGVudDogc3RyaW5nO1xyXG4gICAgICAgIGZvbnRTaXplOiBudW1iZXI7XHJcbiAgICAgICAgcG9zaXRpb246IHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfTtcclxuICAgIFxyXG4gICAgICAgIGNvbnN0cnVjdG9yKGNvbnRlbnQ6IHN0cmluZywgZm9udFNpemU6IG51bWJlciwgcG9zaXRpb246IHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfSwgaWQ/OiBzdHJpbmcgKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKGlkKTtcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcclxuICAgICAgICAgICAgdGhpcy5mb250U2l6ZSA9IGZvbnRTaXplO1xyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyByZW5kZXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgICAgICBpZih0aGlzLmlkKSB7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvcignIycgKyB0aGlzLmlkKS5pbm5lckhUTUwgPSB0aGlzLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCArPVxyXG4gICAgICAgICAgICAgICAgICAgICc8dGV4dCBpZD1cIicgKyB0aGlzLmlkICsgJ1wiIGZvbnQtc2l6ZT1cIicgKyB0aGlzLmZvbnRTaXplICsgJ1wiJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd4PVwiJyArIHRoaXMucG9zaXRpb24ueCArICdcIiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3k9XCInICsgdGhpcy5wb3NpdGlvbi55ICsgJ1wiICcgKyAnY2xhc3M9XCJzbWFsbFwiPidcclxuICAgICAgICAgICAgICAgICAgICAgICAgKyB0aGlzLmNvbnRlbnQgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L3RleHQ+JztcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgIH1cclxuXHJcbiAgICBjbGFzcyBTVkdCYXRjaCBleHRlbmRzIFNWR0NvbXBvbmVudCB7XHJcbiAgICAgICAgcHJpdmF0ZSBfY29tcG9uZW50czogU1ZHQ29tcG9uZW50W107XHJcblxyXG4gICAgICAgIHNldCBjb21wb25lbnRzKGxpc3Q6IFNWR0NvbXBvbmVudFtdKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbXBvbmVudHMgPSBsaXN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IoaWQ6IHN0cmluZykge1xyXG4gICAgICAgICAgICBzdXBlcihpZCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbXBvbmVudHMgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHJlbmRlcihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGlmKCFjb250YWluZXIucXVlcnlTZWxlY3RvcignIycgKyB0aGlzLmlkKSlcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgKz0gJzxnIGlkPVwiJyArIHRoaXMuaWQgKyAnXCI+PC9nPic7XHJcbiAgICAgICAgICAgIGxldCBlbGVtZW50ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyMnICsgdGhpcy5pZCk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbXBvbmVudHMuZm9yRWFjaCggZSA9PiBlLnJlbmRlcihlbGVtZW50IGFzIEhUTUxFbGVtZW50KSApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgWFlDaGFydCB7XHJcbiAgICAgICAgcHJvdGVjdGVkIGRhdGFDb2xsZWN0aW9uOiBEYXRhU2V0W107XHJcbiAgICAgICAgcHJvdGVjdGVkIGRpdjogSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgcHJvdGVjdGVkIGRpbWVuc2lvbnM6IHsgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIgfTtcclxuICAgICAgICBwcm90ZWN0ZWQgY29tcG9uZW50czogTWFwPHN0cmluZywgU1ZHQ29tcG9uZW50PjtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlYWRvbmx5IG9mZnNldFk6IG51bWJlcjtcclxuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgb2Zmc2V0WDogbnVtYmVyO1xyXG4gICAgXHJcbiAgICAgICAgY29uc3RydWN0b3IoZGl2OiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkaXYpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5vZmZzZXRYID0gdGhpcy5kaXYub2Zmc2V0V2lkdGggKiAwLjA0O1xyXG4gICAgICAgICAgICB0aGlzLm9mZnNldFkgPSB0aGlzLmRpdi5vZmZzZXRIZWlnaHQgKiAwLjA1O1xyXG4gICAgICAgICAgICB0aGlzLmRpbWVuc2lvbnMgPSB7IHdpZHRoOiB0aGlzLmRpdi5vZmZzZXRXaWR0aCAtIHRoaXMub2Zmc2V0WCwgaGVpZ2h0OiAgdGhpcy5kaXYub2Zmc2V0SGVpZ2h0IC0gdGhpcy5vZmZzZXRZIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGl2LmlubmVySFRNTCA9IHRoaXMucmVuZGVyU1ZHKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YUNvbGxlY3Rpb24gPSBbXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBhYnN0cmFjdCBjcmVhdGVHcmFwaChzZXQ6IERhdGFTZXQpOiBQYXRoO1xyXG4gICAgICAgIHByb3RlY3RlZCBhYnN0cmFjdCBjb25uZWN0UG9pbnRzKHg6IG51bWJlciwgeTogbnVtYmVyLCBwYXRoOiBQYXRoLCBzZXQ6IERhdGFTZXQpOiB2b2lkO1xyXG4gICAgXHJcbiAgICAgICAgcHVibGljIGNyZWF0ZURhdGFTZXQoKSB7XHJcbiAgICAgICAgICAgIGxldCBzZXQgPSBuZXcgRGF0YVNldCgpO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFDb2xsZWN0aW9uLnB1c2goc2V0KTtcclxuICAgICAgICAgICAgcmV0dXJuIHNldDtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBwcm90ZWN0ZWQgcmVuZGVyU1ZHKGNvbnRlbnQ/OiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuICAnPHN2ZyBpZD1cIicgKyBcIlNWR19ESVZcIiArICdcIiAnICArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCIgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd2aWV3Qm94PVwiIDAgMCAnICsgdGhpcy5kaXYub2Zmc2V0V2lkdGggKyAnICcgKyB0aGlzLmRpdi5vZmZzZXRIZWlnaHQgKyAnXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZyBpZD1cIicgKyBTVkdfRElWICsgJ1wiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgnICsgdGhpcy5vZmZzZXRYIC8gMiArICcgJyArIHRoaXMub2Zmc2V0WSAvIDIgKyAnKVwiID48L2c+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvc3ZnPic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgY3JlYXRlUmVmZXJlbmNlTGluZXMoKTogUGF0aCB7XHJcbiAgICAgICAgICAgIGxldCBzZXQgPSB0aGlzLmRhdGFDb2xsZWN0aW9uWzBdO1xyXG4gICAgICAgICAgICBpZighc2V0KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBkZW5zaXR5ID0gc2V0LnByb3BlcnRpZXMuZGVuc2l0eTtcclxuICAgICAgICAgICAgY29uc3QgcGF0aFByb3BlcnRpZXMgPSB7IHN0cm9rZTogXCIjZGJkYmRiXCIsIHN0cm9rZVdpZHRoOiAwLjUgfTtcclxuICAgICAgICAgICAgY29uc3QgaGFsZlN0cm9rZSA9IHBhdGhQcm9wZXJ0aWVzLnN0cm9rZVdpZHRoIC8gMjtcclxuICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSB0aGlzLmRpbWVuc2lvbnMud2lkdGggLyAoc2V0LmRhdGEubGVuZ3RoICsgMSk7XHJcbiAgICAgICAgICAgIGxldCBwYXRoID0gbmV3IFBhdGgoJ3JlZkxpbmVzJywgcGF0aFByb3BlcnRpZXMpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzZXQuZGF0YS5sZW5ndGggLSAxOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHBhdGgubW92ZVRvKGludGVydmFsICogKGkgKyAyKSAtIGhhbGZTdHJva2UsIGhhbGZTdHJva2UpO1xyXG4gICAgICAgICAgICAgICAgcGF0aC5MaW5lVih0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0IC0gaGFsZlN0cm9rZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgZGVuc2l0eSAtIDE7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgcGF0aC5tb3ZlVG8oaGFsZlN0cm9rZSArIGludGVydmFsLCB0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0IC8gZGVuc2l0eSAqIChpICsgMSkgKyBoYWxmU3Ryb2tlKTtcclxuICAgICAgICAgICAgICAgIHBhdGguTGluZUgodGhpcy5kaW1lbnNpb25zLndpZHRoIC0gaGFsZlN0cm9rZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudHMucHV0KHBhdGguaWQsIHBhdGgpO1xyXG4gICAgICAgICAgICByZXR1cm4gcGF0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBjcmVhdGVYSGVhZGVycygpOiBUZXh0W10ge1xyXG4gICAgICAgICAgICBsZXQgc2V0ID0gdGhpcy5kYXRhQ29sbGVjdGlvblswXTtcclxuICAgICAgICAgICAgaWYoIXNldClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBbXTtcclxuICAgICAgICAgICAgY29uc3QgZm9udFNpemUgPSB0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0IC8gNDY7XHJcbiAgICAgICAgICAgIGNvbnN0IGludGVydmFsWCA9IHRoaXMuZGltZW5zaW9ucy53aWR0aCAvIChzZXQuZGF0YS5sZW5ndGggKyAxKTtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZXMgPSBzZXQudG9Ib3VyTWludXRlKCk7XHJcblxyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgc2V0LmRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG5ldyBUZXh0KGRhdGVzW2ldLCBmb250U2l6ZSwgeyB4OiBpbnRlcnZhbFggKiAoaSArIDEpLCB5OiB0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0IH0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGNyZWF0ZVlIZWFkZXJzKCk6IFRleHRbXSB7XHJcbiAgICAgICAgICAgIGxldCBzZXQgPSB0aGlzLmRhdGFDb2xsZWN0aW9uWzBdO1xyXG4gICAgICAgICAgICBpZighc2V0KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCBmb250U2l6ZSA9IHRoaXMuZGltZW5zaW9ucy5oZWlnaHQgLyAzNTtcclxuICAgICAgICAgICAgY29uc3QgZGVuc2l0eSA9IHNldC5wcm9wZXJ0aWVzLmRlbnNpdHk7XHJcbiAgICAgICAgICAgIGNvbnN0IGludGVydmFsID0gdGhpcy5kaW1lbnNpb25zLmhlaWdodCAvIGRlbnNpdHk7XHJcblxyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgZGVuc2l0eTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY29udGVudCA9IChNYXRoLmZsb29yKHNldC5ib3VuZHMoKS5tYXggLSBpICogc2V0LmJvdW5kcygpLm1heCAvIChkZW5zaXR5IC0gMSkpKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3IFRleHQoY29udGVudCwgZm9udFNpemUsIHsgeDogMCwgeTogaW50ZXJ2YWwgKiBpICsgZm9udFNpemUgKiAwLjM1IH0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHB1YmxpYyBkcmF3KCkge1xyXG4gICAgICAgICAgICBsZXQgbWFpblN2ZzogSFRNTEVsZW1lbnQgPSB0aGlzLmRpdi5xdWVyeVNlbGVjdG9yKCcjJyArIFNWR19ESVYpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVSZWZlcmVuY2VMaW5lcygpLnJlbmRlcihtYWluU3ZnKTtcclxuXHJcbiAgICAgICAgICAgIGZvcihsZXQgc2V0IG9mIHRoaXMuZGF0YUNvbGxlY3Rpb24pXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUdyYXBoKHNldCkucmVuZGVyKG1haW5TdmcpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHlIZWFkZXJzID0gbmV3IFNWR0JhdGNoKCd5SGVhZGVycycpO1xyXG4gICAgICAgICAgICB5SGVhZGVycy5jb21wb25lbnRzID0gdGhpcy5jcmVhdGVZSGVhZGVycygpO1xyXG4gICAgICAgICAgICB5SGVhZGVycy5yZW5kZXIobWFpblN2Zyk7XHJcblxyXG4gICAgICAgICAgICBsZXQgeEhlYWRlcnMgPSBuZXcgU1ZHQmF0Y2goJ3hIZWFkZXJzJyk7XHJcbiAgICAgICAgICAgIHhIZWFkZXJzLmNvbXBvbmVudHMgPSB0aGlzLmNyZWF0ZVhIZWFkZXJzKCk7XHJcbiAgICAgICAgICAgIHhIZWFkZXJzLnJlbmRlcihtYWluU3ZnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBMaW5lQ2hhcnQgZXh0ZW5kcyBYWUNoYXJ0IHtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IoZGl2OiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgc3VwZXIoZGl2KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBjb25uZWN0UG9pbnRzKHg6IG51bWJlciwgeTogbnVtYmVyLCBwYXRoOiBQYXRoKSB7XHJcbiAgICAgICAgICAgIHBhdGgubGluZVRvKHgsIHkpLm1vdmVUbyh4LCB5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBjcmVhdGVHcmFwaCgpOiBQYXRoIHtcclxuICAgICAgICAgICAgbGV0IHBhdGggPSBuZXcgUGF0aCgnZ3JhcGgnKTtcclxuICAgICAgICAgICAgcGF0aC5tb3ZlVG8oMCwgMCk7XHJcbiAgICAgICAgICAgIHBhdGgubGluZVRvKDEwMCwgMTAwKTtcclxuICAgICAgICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuICAgIFxyXG4gICAgZXhwb3J0IGNsYXNzIFN0ZXBMaW5lQ2hhcnQgZXh0ZW5kcyBYWUNoYXJ0IHtcclxuICAgIFxyXG4gICAgICAgIGNvbnN0cnVjdG9yKGRpdjogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKGRpdik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgY29ubmVjdFBvaW50cyh4OiBudW1iZXIsIHk6IG51bWJlciwgcGF0aDogUGF0aCwgc2V0OiBEYXRhU2V0KSB7XHJcbiAgICAgICAgICAgIGxldCBtb3ZpbmdVcCA9IHkgPCBwYXRoLmN1cnJlbnRQb3NbMV07XHJcbiAgICAgICAgICAgIGxldCBoYWxmU3Ryb2tlID0gc2V0LnByb3BlcnRpZXMucGF0aFByb3BlcnRpZXMuc3Ryb2tlV2lkdGggLyAyO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHBhdGhcclxuICAgICAgICAgICAgICAgIC5MaW5lSCh4KVxyXG4gICAgICAgICAgICAgICAgLm1vdmVUbyh4IC0gaGFsZlN0cm9rZSwgbW92aW5nVXAgPyBwYXRoLmN1cnJlbnRQb3NbMV0gKyBoYWxmU3Ryb2tlIDogcGF0aC5jdXJyZW50UG9zWzFdIC0gaGFsZlN0cm9rZSlcclxuICAgICAgICAgICAgICAgIC5MaW5lVihtb3ZpbmdVcCA/IHkgKyBoYWxmU3Ryb2tlIDogeSAtIGhhbGZTdHJva2UpXHJcbiAgICAgICAgICAgICAgICAubW92ZVRvKHBhdGguY3VycmVudFBvc1swXSAtIGhhbGZTdHJva2UsIHBhdGguY3VycmVudFBvc1sxXSk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgcHJvdGVjdGVkIGNyZWF0ZUdyYXBoKHNldDogRGF0YVNldCk6IFBhdGgge1xyXG4gICAgICAgICAgICBsZXQgcGF0aCA9IG5ldyBQYXRoKCdncmFwaCcsIHNldC5wcm9wZXJ0aWVzLnBhdGhQcm9wZXJ0aWVzKTtcclxuICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWxYID0gdGhpcy5kaW1lbnNpb25zLndpZHRoIC8gKHNldC5kYXRhLmxlbmd0aCArIDEpXHJcbiAgICAgICAgICAgIGNvbnN0IGludGVydmFsWSA9IHRoaXMuZGltZW5zaW9ucy5oZWlnaHQgLyBzZXQucHJvcGVydGllcy5kZW5zaXR5O1xyXG4gICAgXHJcbiAgICAgICAgICAgIHBhdGgubW92ZVRvKGludGVydmFsWCwgdGhpcy5kaW1lbnNpb25zLmhlaWdodCAtIHNldC5kYXRhWzBdW3NldC55S2V5XSAvIHNldC5ib3VuZHMoKS5tYXggKiB0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0IC0gaW50ZXJ2YWxZICk7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDE7IGkgPCBzZXQuZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0UG9pbnRzKGludGVydmFsWCAqIChpICsgMSksICh0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0IC0gaW50ZXJ2YWxZKSAtIHNldC5kYXRhW2ldW3NldC55S2V5XSAvIHNldC5ib3VuZHMoKS5tYXggKiAodGhpcy5kaW1lbnNpb25zLmhlaWdodCAtIGludGVydmFsWSksIHBhdGgsIHNldCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcGF0aC5MaW5lSCh0aGlzLmRpbWVuc2lvbnMud2lkdGgpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudHMucHV0KHBhdGguaWQsIHBhdGgpO1xyXG4gICAgICAgICAgICByZXR1cm4gcGF0aDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIH0gLy8gTmFtZXNwYWNlIGVuZFxyXG5cclxuICAgIGV4cG9ydCBkZWZhdWx0IHh5Y2hhcnRzOyJdLCJzb3VyY2VSb290IjoiIn0=